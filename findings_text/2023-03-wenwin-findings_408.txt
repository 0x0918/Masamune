# Lines of code  https://github.com/code-423n4/2023-03-wenwin/blob/main/src/LotteryMath.sol#L24 https://github.com/code-423n4/2023-03-wenwin/blob/main/src/Lottery.sol#L164-L166 https://github.com/code-423n4/2023-03-wenwin/blob/main/src/Lottery.sol#L271-L277   # Vulnerability details  ## Constant DRAWS_PER_YEAR will break if drawPeriod != 1 week Currently the constant `DRAWS_PER_YEAR` is set to 52 as the Lottery expects the drawPeriod to be 1 week.  The documentation states that a user has 1 year to claim his winnings https://docs.wenwin.com/wenwin-lottery/the-game/prizes#claiming-prizes  If the drawPeriod is set < 7 days it will break this and the user has less time than 1 year to claim his price.  For example if the drawPeriod will be 1 day (86400) there should be 365 DRAWS_PER_YEAR, but as it is fixed to 52, the user only has 52 days to claim his rewards and after that it's not possible anymore.  ## Proof of Concept If the drawPeriod is not set to 7 days (604800 seconds) it will return a unclaimedJackpot early and also will prevent user to claim their winnings.  ```solidity File: src/Lottery.sol 159:     function claimable(uint256 ticketId) external view override returns (uint256 claimableAmount, uint8 winTier) { 160:         TicketInfo memory ticketInfo = ticketsInfo[ticketId]; 161:         if (!ticketInfo.claimed) { 162:             uint120 _winningTicket = winningTicket[ticketInfo.drawId]; 163:             winTier = TicketUtils.ticketWinTier(ticketInfo.combination, _winningTicket, selectionSize, selectionMax); 164:             if (block.timestamp <= ticketRegistrationDeadline(ticketInfo.drawId + LotteryMath.DRAWS_PER_YEAR)) { 165:                 claimableAmount = winAmount[ticketInfo.drawId][winTier]; 166:             } 167:         } 168:     }  File: src/Lottery.sol 271:     function returnUnclaimedJackpotToThePot() private { 272:         if (currentDraw >= LotteryMath.DRAWS_PER_YEAR) { 273:             uint128 drawId = currentDraw - LotteryMath.DRAWS_PER_YEAR; 274:             uint256 unclaimedJackpotTickets = unclaimedCount[drawId][winningTicket[drawId]]; 275:             currentNetProfit += int256(unclaimedJackpotTickets * winAmount[drawId][selectionSize]); 276:         } 277:     } ```  ## Tools Used manual review  ## Recommended Mitigation Steps Use a fixed `drawPeriod` of 604800 or change the logic in the function `claimable` and `returnUnclaimedJackpotToThePot` to use a calculated DRAWS_PER_YEAR variable like the following:  ```solidity function getDrawsPerYear() public view returns (uint128) {     return uint128(365 days / drawPeriod); } ```
