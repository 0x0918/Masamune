# Gas Optimizations  The following sections detail the gas optimizations found throughout the codebase. Each optimization is documented with the setup, an explainer for the optimization, a gas report and line identifiers for each optimization across the codebase. For each section's gas report, the optimizer was turned on and set to 10000 runs. You can replicate any tests/gas reports by heading to [0xKitsune/gas-lab](https://github.com/0xKitsune/gas-lab) and cloning the repo. Then, simply copy/paste the contract examples from any section and run `forge test --gas-report`. You can also easily update the optimizer runs in the `foundry.toml`.  ---  ## Use assembly to hash instead of Solidity  ```js  contract GasTest is DSTest {     Contract0 c0;     Contract1 c1;      function setUp() public {         c0 = new Contract0();         c1 = new Contract1();     }      function testGas() public view {         c0.solidityHash(2309349, 2304923409);         c1.assemblyHash(2309349, 2304923409);     } }  contract Contract0 {     function solidityHash(uint256 a, uint256 b) public view {         //unoptimized         keccak256(abi.encodePacked(a, b));     } }  contract Contract1 {     function assemblyHash(uint256 a, uint256 b) public view {         //optimized         assembly {             mstore(0x00, a)             mstore(0x20, b)             let hashedVal := keccak256(0x00, 0x40)         }     } } ```  ### Gas Report  ```js ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract0 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 36687              ┆ 214             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ solidityHash       ┆ 313             ┆ 313 ┆ 313    ┆ 313 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract1 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 31281              ┆ 186             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ assemblyHash       ┆ 231             ┆ 231 ┆ 231    ┆ 231 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ```  ### Lines  - InflationManager.sol:628  - InflationManager.sol:632  - InflationManager.sol:636  ---  ## `unchecked{++i}` instead of `i++` (or use assembly when applicable)  Use `++i` instead of `i++`. This is especially useful in for loops but this optimization can be used anywhere in your code. You can also use `unchecked{++i;}` for even more gas savings but this will not check to see if `i` overflows. For extra safety if you are worried about this, you can add a require statement after the loop checking if `i` is equal to the final incremented value. For best gas savings, use inline assembly, however this limits the functionality you can achieve. For example you cant use Solidity syntax to internally call your own contract within an assembly block and external calls must be done with the `call()` or `delegatecall()` instruction. However when applicable, inline assembly will save much more gas.  ```js  contract GasTest is DSTest {     Contract0 c0;     Contract1 c1;     Contract2 c2;     Contract3 c3;     Contract4 c4;      function setUp() public {         c0 = new Contract0();         c1 = new Contract1();         c2 = new Contract2();         c3 = new Contract3();         c4 = new Contract4();     }      function testGas() public {         c0.iPlusPlus();         c1.plusPlusI();         c2.uncheckedPlusPlusI();         c3.safeUncheckedPlusPlusI();         c4.inlineAssemblyLoop();     } }  contract Contract0 {     //loop with i++     function iPlusPlus() public pure {         uint256 j = 0;         for (uint256 i; i < 10; i++) {             j++;         }     } }  contract Contract1 {     //loop with ++i     function plusPlusI() public pure {         uint256 j = 0;         for (uint256 i; i < 10; ++i) {             j++;         }     } }  contract Contract2 {     //loop with unchecked{++i}     function uncheckedPlusPlusI() public pure {         uint256 j = 0;         for (uint256 i; i < 10; ) {             j++;              unchecked {                 ++i;             }         }     } }  contract Contract3 {     //loop with unchecked{++i} with additional overflow check     function safeUncheckedPlusPlusI() public pure {         uint256 j = 0;         uint256 i = 0;         for (i; i < 10; ) {             j++;              unchecked {                 ++i;             }         }          //check for overflow         assembly {             if lt(i, 10) {                 mstore(0x00, "loop overflow")                 revert(0x00, 0x20)             }         }     } }  contract Contract4 {     //loop with inline assembly     function inlineAssemblyLoop() public pure {         assembly {             let j := 0              for {                 let i := 0             } lt(i, 10) {                 i := add(i, 0x01)             } {                 j := add(j, 0x01)             }         }     } }  ```  ### Gas Report  ```js  ╭────────────────────┬─────────────────┬──────┬────────┬──────┬─────────╮ │ Contract0 contract ┆                 ┆      ┆        ┆      ┆         │ ╞════════════════════╪═════════════════╪══════╪════════╪══════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 37687              ┆ 219             ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg  ┆ median ┆ max  ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ iPlusPlus          ┆ 2039            ┆ 2039 ┆ 2039   ┆ 2039 ┆ 1       │ ╰────────────────────┴─────────────────┴──────┴────────┴──────┴─────────╯ ╭────────────────────┬─────────────────┬──────┬────────┬──────┬─────────╮ │ Contract1 contract ┆                 ┆      ┆        ┆      ┆         │ ╞════════════════════╪═════════════════╪══════╪════════╪══════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 37287              ┆ 217             ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg  ┆ median ┆ max  ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ plusPlusI          ┆ 1989            ┆ 1989 ┆ 1989   ┆ 1989 ┆ 1       │ ╰────────────────────┴─────────────────┴──────┴────────┴──────┴─────────╯ ╭────────────────────────┬─────────────────┬──────┬────────┬──────┬─────────╮ │ Contract3 contract     ┆                 ┆      ┆        ┆      ┆         │ ╞════════════════════════╪═════════════════╪══════╪════════╪══════╪═════════╡ │ Deployment Cost        ┆ Deployment Size ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 42693                  ┆ 244             ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name          ┆ min             ┆ avg  ┆ median ┆ max  ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ safeUncheckedPlusPlusI ┆ 1355            ┆ 1355 ┆ 1355   ┆ 1355 ┆ 1       │ ╰────────────────────────┴─────────────────┴──────┴────────┴──────┴─────────╯ ╭────────────────────┬─────────────────┬──────┬────────┬──────┬─────────╮ │ Contract2 contract ┆                 ┆      ┆        ┆      ┆         │ ╞════════════════════╪═════════════════╪══════╪════════╪══════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 35887              ┆ 210             ┆      ┆        ┆      ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg  ┆ median ┆ max  ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ uncheckedPlusPlusI ┆ 1329            ┆ 1329 ┆ 1329   ┆ 1329 ┆ 1       │ ╰────────────────────┴─────────────────┴──────┴────────┴──────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract4 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 26881              ┆ 164             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ inlineAssemblyLoop ┆ 709             ┆ 709 ┆ 709    ┆ 709 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯  ```  ### Lines  - KeeperGauge.sol:59  - KeeperGauge.sol:98  ---  ## Use assembly for math (add, sub, mul, div)  Use assembly for math instead of Solidity. You can check for overflow/underflow in assembly to ensure safety. If using Solidity versions < 0.8.0 and you are using Safemath, you can gain significant gas savings by using assembly to calculate values and checking for overflow/underflow.  ```js  contract GasTest is DSTest {     Contract0 c0;     Contract1 c1;     Contract2 c2;     Contract3 c3;     Contract4 c4;     Contract5 c5;     Contract6 c6;     Contract7 c7;      function setUp() public {         c0 = new Contract0();         c1 = new Contract1();         c2 = new Contract2();         c3 = new Contract3();         c4 = new Contract4();         c5 = new Contract5();         c6 = new Contract6();         c7 = new Contract7();     }      function testGas() public {         c0.addTest(34598345, 100);         c1.addAssemblyTest(34598345, 100);         c2.subTest(34598345, 100);         c3.subAssemblyTest(34598345, 100);         c4.mulTest(34598345, 100);         c5.mulAssemblyTest(34598345, 100);         c6.divTest(34598345, 100);         c7.divAssemblyTest(34598345, 100);     } }  contract Contract0 {     //addition in Solidity     function addTest(uint256 a, uint256 b) public pure {         uint256 c = a + b;     } }  contract Contract1 {     //addition in assembly     function addAssemblyTest(uint256 a, uint256 b) public pure {         assembly {             let c := add(a, b)              if lt(c, a) {                 mstore(0x00, "overflow")                 revert(0x00, 0x20)             }         }     } }  contract Contract2 {     //subtraction in Solidity     function subTest(uint256 a, uint256 b) public pure {         uint256 c = a - b;     } }  contract Contract3 {     //subtraction in assembly     function subAssemblyTest(uint256 a, uint256 b) public pure {         assembly {             let c := sub(a, b)              if gt(c, a) {                 mstore(0x00, "underflow")                 revert(0x00, 0x20)             }         }     } }  contract Contract4 {     //multiplication in Solidity     function mulTest(uint256 a, uint256 b) public pure {         uint256 c = a * b;     } }  contract Contract5 {     //multiplication in assembly     function mulAssemblyTest(uint256 a, uint256 b) public pure {         assembly {             let c := mul(a, b)              if lt(c, a) {                 mstore(0x00, "overflow")                 revert(0x00, 0x20)             }         }     } }  contract Contract6 {     //division in Solidity     function divTest(uint256 a, uint256 b) public pure {         uint256 c = a * b;     } }  contract Contract7 {     //division in assembly     function divAssemblyTest(uint256 a, uint256 b) public pure {         assembly {             let c := div(a, b)              if gt(c, a) {                 mstore(0x00, "underflow")                 revert(0x00, 0x20)             }         }     } }   ```  ### Gas Report  ```js  ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract0 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 40493              ┆ 233             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ addTest            ┆ 303             ┆ 303 ┆ 303    ┆ 303 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract1 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 37087              ┆ 216             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ addAssemblyTest    ┆ 263             ┆ 263 ┆ 263    ┆ 263 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract2 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 40293              ┆ 232             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ subTest            ┆ 300             ┆ 300 ┆ 300    ┆ 300 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract3 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 37287              ┆ 217             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ subAssemblyTest    ┆ 263             ┆ 263 ┆ 263    ┆ 263 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract4 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 41893              ┆ 240             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ mulTest            ┆ 325             ┆ 325 ┆ 325    ┆ 325 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract5 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 37087              ┆ 216             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ mulAssemblyTest    ┆ 265             ┆ 265 ┆ 265    ┆ 265 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract6 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 41893              ┆ 240             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ divTest            ┆ 325             ┆ 325 ┆ 325    ┆ 325 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract7 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 37287              ┆ 217             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ divAssemblyTest    ┆ 265             ┆ 265 ┆ 265    ┆ 265 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯  ```  ### Lines  - AmmGauge.sol:111  - AmmGauge.sol:133  - AmmGauge.sol:148  - BkdLocker.sol:140  - BkdLocker.sol:326  - CvxMintAmount.sol:10  - CvxMintAmount.sol:12  - CvxMintAmount.sol:21  - CvxMintAmount.sol:30  - CvxMintAmount.sol:33  - InflationManager.sol:574  - InflationManager.sol:588  - InflationManager.sol:601  - KeeperGauge.sol:114  - LpGauge.sol:115  - Minter.sol:188  - Minter.sol:190  - Minter.sol:200  - Minter.sol:204  - Minter.sol:207  - Minter.sol:219  - Minter.sol:86  - Minter.sol:87  - Minter.sol:88  - Minter.sol:90  - VestedEscrow.sol:104  - VestedEscrow.sol:108  - VestedEscrow.sol:109  - VestedEscrow.sol:155  - VestedEscrow.sol:63  - VestedEscrowRevocable.sol:59  ---  ## Use assembly when getting a contract's balance of ETH.  You can use `selfbalance()` instead of `address(this).balance` when getting your contract's balance of ETH to save gas. Additionally, you can use `balance(address)` instead of `address.balance()` when getting an external contract's balance of ETH.  ```js  contract GasTest is DSTest {     Contract0 c0;     Contract1 c1;     Contract2 c2;     Contract3 c3;      function setUp() public {         c0 = new Contract0();         c1 = new Contract1();         c2 = new Contract2();         c3 = new Contract3();     }      function testGas() public {         c0.addressInternalBalance();         c1.assemblyInternalBalance();         c2.addressExternalBalance(address(this));         c3.assemblyExternalBalance(address(this));     } }  contract Contract0 {     function addressInternalBalance() public returns (uint256) {         return address(this).balance;     } }  contract Contract1 {     function assemblyInternalBalance() public returns (uint256) {         assembly {             let c := selfbalance()             mstore(0x00, c)             return(0x00, 0x20)         }     } }  contract Contract2 {     function addressExternalBalance(address addr) public {         uint256 bal = address(addr).balance;         bal++;     } }  contract Contract3 {     function assemblyExternalBalance(address addr) public {         uint256 bal;         assembly {             bal := balance(addr)         }         bal++;     } } ```  ### Gas Report  ```js ╭────────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract0 contract     ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost        ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 23675                  ┆ 147             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name          ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ addressInternalBalance ┆ 148             ┆ 148 ┆ 148    ┆ 148 ┆ 1       │ ╰────────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭─────────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract1 contract      ┆                 ┆     ┆        ┆     ┆         │ ╞═════════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost         ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 27081                   ┆ 165             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name           ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ assemblyInternalBalance ┆ 133             ┆ 133 ┆ 133    ┆ 133 ┆ 1       │ ╰─────────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭────────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract2 contract     ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost        ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 61511                  ┆ 339             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name          ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ addressExternalBalance ┆ 417             ┆ 417 ┆ 417    ┆ 417 ┆ 1       │ ╰────────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭─────────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract3 contract      ┆                 ┆     ┆        ┆     ┆         │ ╞═════════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost         ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 57105                   ┆ 317             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name           ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ assemblyExternalBalance ┆ 411             ┆ 411 ┆ 411    ┆ 411 ┆ 1       │ ╰─────────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯  ```  ### Lines  - FeeBurner.sol:102  - RewardHandler.sol:40  ---  ## Use assembly to check for address(0)  ```js   contract GasTest is DSTest {     Contract0 c0;     Contract1 c1;      function setUp() public {         c0 = new Contract0();         c1 = new Contract1();     }      function testGas() public view {         c0.ownerNotZero(address(this));         c1.assemblyOwnerNotZero(address(this));     } }  contract Contract0 {     function ownerNotZero(address _addr) public pure {         require(_addr != address(0), "zero address)");     } }  contract Contract1 {     function assemblyOwnerNotZero(address _addr) public pure {         assembly {             if iszero(_addr) {                 mstore(0x00, "zero address")                 revert(0x00, 0x20)             }         }     } }   ```  ### Gas Report  ```js ╭────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract0 contract ┆                 ┆     ┆        ┆     ┆         │ ╞════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost    ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 61311              ┆ 338             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name      ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ ownerNotZero       ┆ 258             ┆ 258 ┆ 258    ┆ 258 ┆ 1       │ ╰────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ╭──────────────────────┬─────────────────┬─────┬────────┬─────┬─────────╮ │ Contract1 contract   ┆                 ┆     ┆        ┆     ┆         │ ╞══════════════════════╪═════════════════╪═════╪════════╪═════╪═════════╡ │ Deployment Cost      ┆ Deployment Size ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ 44893                ┆ 255             ┆     ┆        ┆     ┆         │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ Function Name        ┆ min             ┆ avg ┆ median ┆ max ┆ # calls │ ├╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤ │ assemblyOwnerNotZero ┆ 252             ┆ 252 ┆ 252    ┆ 252 ┆ 1       │ ╰──────────────────────┴─────────────────┴─────┴────────┴─────┴─────────╯ ```  ### Lines  - AddressProvider.sol:102  - AddressProvider.sol:105  - AddressProvider.sol:122  - AddressProvider.sol:163  - AddressProvider.sol:166  - AddressProvider.sol:295  - AddressProvider.sol:98  - Controller.sol:34  - Controller.sol:35  - Controller.sol:48  - Controller.sol:50  - Controller.sol:68  - Controller.sol:82  - FeeBurner.sol:101  - FeeBurner.sol:60  - InflationManager.sol:244  - InflationManager.sol:270  - InflationManager.sol:295  - InflationManager.sol:486  - InflationManager.sol:496  - InflationManager.sol:508  - InflationManager.sol:522  - InflationManager.sol:59  - InflationManager.sol:60  - InflationManager.sol:622  - LpGauge.sol:31  - LpGauge.sol:35  - Minter.sol:100  - PoolMigrationZap.sol:26  - PoolMigrationZap.sol:62  - Preparable.sol:100  - Preparable.sol:142  - RewardHandler.sol:45  - StakerVault.sol:119  - StakerVault.sol:160  - StakerVault.sol:205  - StakerVault.sol:226  - StakerVault.sol:238  - StakerVault.sol:326  - StakerVault.sol:372  - StakerVault.sol:66  - StakerVault.sol:76  - VestedEscrow.sol:69  - VestedEscrow.sol:75  - VestedEscrow.sol:98  ---
